

<h1><%=@the_user.username%></h1>

<dl>
  <dt>Private</dt>
  <%if @the_user.private == true%>
  <dd>true</dd>
  <%else%>
  <dd>false</dd>
   <%end%>
   <%@followers = FollowRequest.where({:recipient_id=>@the_user.id})%>
  <dt>Followers</dt>
  <dd><%=@followers.count%></dd>

   


    
       <%@following = FollowRequest.where({:sender_id => @the_user.id})%>

       <% follow_request = @current_user.follow_request_for(@the_user.id) %>

            <% if follow_request.nil? %>
              <form action="/insert_follow_request" method="post">
              <input type="hidden" name="query_recipient_id" value="<%=@the_user.id%>">
             <button>
               Follow
             </button>
               </form>
          <%elsif follow_request.status == "accepted" %>
          <a href="/delete_follow_request/<%=follow_request.id%>">
            Unfollow
          </a>
          <%end%>
  

  </dd>
  
  <dt>Following</dt>
  <dd><%=@following.count%></dd>
  
<nav>
  <ul>
    <li>
      <a href="/users/<%=@the_user.username%>">Profile</a>
    </li>
    <li>
      <a href="/users/<%=@the_user.username%>/liked_photos">Liked photos</a>
    </li>
    <li>
      <a href="/users/<%=@the_user.username%>/feed">Feed</a>
    </li>
    <li>
      <a href="/users/<%=@the_user.username%>/discover">Discover</a>
    </li>
  </ul>
</nav>




<h2> Feed (<%=@feed.count%>)</h2>

<table border="1">
  <tr>
    <th>
      Image
    </th>

    <th>
      Owner
    </th>

    <th>
      Caption
    </th>

    <th>
      Posted
    </th>

    <th>
      Likes
    </th>

    <th></th>
  </tr>

<%@feed.each do |user_post|%>
  <tr>
    <td>
    <img src="<%= user_post.image %>">
    </td>

    <td>
       <%= user_post.id %>
    </td>

    <td>
      <%=user_post.caption%>
    </td>

    <td>
      <%=time_ago_in_words(user_post.created_at)%>
    </td>
    <td>
    <%=user_post.likes_count%>
    </td>
    <td>
    <a href="photos/<%=user_post.id%>"> Show details</a>
    </td>
  </tr>
  <%end%>
